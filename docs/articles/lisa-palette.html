<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How does lisa palette work? • lisa</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How does lisa palette work?">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-135464357-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-135464357-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lisa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/lisa-palette.html">How does lisa palette work?</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tyluRp/lisa">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How does lisa palette work?</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tyluRp/lisa/blob/master/vignettes/lisa-palette.Rmd"><code>vignettes/lisa-palette.Rmd</code></a></small>
      <div class="hidden name"><code>lisa-palette.Rmd</code></div>

    </div>

    
    
<p>The function <code>lisa_palette</code> allows users to call and modify palettes by adjusting the parameters <code>n</code> and <code>type</code> where <code>n</code> represents the number of colors and <code>type</code> represents <em>discrete</em> or <em>continuous</em>. So how does this work? Under the hood, <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">grDevices::colorRampPalette()</a></code> is doing all the work, see <a href="https://github.com/tyluRp/lisa/blob/d59da6904dad2391a29ec194d8a673c68df943b5/R/lisa.R#L53">here</a>. Unfortunately, I am unable to dive into the details of how <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette()</a></code> works but we can at least see how this works visually. The palette we will use is <code>AndyWarhol_3</code>, Andy Warhol’s <a href="https://www.moma.org/collection/works/71518?locale=en"><em>Mick Jagger</em></a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lisa)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(lisa<span class="op">$</span>AndyWarhol_<span class="dv">3</span>)</a></code></pre></div>
<p><img src="lisa-palette_files/figure-html/setup-1.png" width="700"></p>
<p>To compare how things change with <code>lisa_palette</code> we can create a list of 10 palettes:</p>
<ol style="list-style-type: decimal">
<li>5 discrete palettes with n = 1:5</li>
<li>5 continuous palettes with n = 1:5</li>
</ol>
<p>Note: You will not be able to reproduce this plot with the released version from CRAN, install the latest from GitHub if you want to reproduce. The CRAN version doesn’t allow you to modify the plot title.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="kw"><a href="../reference/lisa_palette.html">lisa_palette</a></span>(<span class="st">"AndyWarhol_3"</span>, <span class="dt">n =</span> x, <span class="st">"continuous"</span>), <span class="dt">name =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(x, <span class="st">", continuous"</span>)))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="kw"><a href="../reference/lisa_palette.html">lisa_palette</a></span>(<span class="st">"AndyWarhol_3"</span>, <span class="dt">n =</span> x, <span class="st">"discrete"</span>), <span class="dt">name =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(x, <span class="st">", discrete"</span>)))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mfrow =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(x, y), plot)</a></code></pre></div>
<p><img src="lisa-palette_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>The behavior for discrete palettes is pretty straight forward, it just picks 1:n colors from the palette vector, for example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">lisa<span class="op">$</span>AndyWarhol_<span class="dv">3</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] "#a99364" "#da95aa" "#f4f0e4"</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="../reference/lisa_palette.html">lisa_palette</a></span>(<span class="st">"AndyWarhol_3"</span>, <span class="dt">n =</span> <span class="dv">3</span>, <span class="dt">type =</span> <span class="st">"discrete"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [1] "#a99364" "#da95aa" "#f4f0e4"</span></a></code></pre></div>
<p>If you ask for more than 5 colors palettes, it’ll throw an error because only 5 exist.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/lisa_palette.html">lisa_palette</a></span>(<span class="st">"AndyWarhol_3"</span>, <span class="dt">n =</span> <span class="dv">6</span>, <span class="dt">type =</span> <span class="st">"discrete"</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; Error in lisa_palette("AndyWarhol_3", n = 6, type = "discrete"): Number of requested colors greater than what palette can offer</span></a></code></pre></div>
<p>The behavior for continuous palettes is a bit different, it tries to interpolate a set of colors to create a new palette. It does this with <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette()</a></code> from the <code>grDevices</code> package:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">grDevices<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span>(lisa<span class="op">$</span>AndyWarhol_<span class="dv">3</span>)(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; [1] "#A99364" "#F4F0E4" "#C2DDB2"</span></a></code></pre></div>
<p>Which is equivalent to:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">ramp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRamp</a></span>(lisa<span class="op">$</span>AndyWarhol_<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">ramp</span>(<span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq.int</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(x) <span class="op">==</span><span class="st"> </span>4L) {</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">    <span class="kw"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span>(x[, 1L], x[, 2L], x[, 3L], x[, 4L], <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span>(x[, 1L], x[, 2L], x[, 3L], <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; [1] "#A99364" "#F4F0E4" "#C2DDB2"</span></a></code></pre></div>
<p>Where the code chunk above is the source code for <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette()</a></code> with a few changes to the formatting, see <a href="https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/library/grDevices/R/colorRamp.R">here</a> for the true source code.</p>
<p>Having said all of this, in order to truly understand how this works, you would need to analyze that chunk of code and any other chunks that it depends on. Beware, from this point on it gets complicated (for me at least) and I don’t think I could accurately articulate what’s going on behind the scenes, so I wont.</p>
<p>In short, <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette()</a></code> depends on a secondary function <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRamp()</a></code> which depends on <code><a href="https://rdrr.io/r/grDevices/convertColor.html">convertColor()</a></code> and so on, see the history of these functions <a href="https://github.com/wch/r-source/commits/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/library/grDevices/R/colorRamp.R">here</a> and the initial commit <a href="https://github.com/wch/r-source/commit/ea07369869b3ab1f2fa05fb221a57a5b117c0fc5#diff-10c83c04d434b2bd02fbbcb84dd92cfb">here</a> by <a href="https://twitter.com/tslumley">Thomas Lumley</a> in 2004. Whats interesting is the <a href="http://www.brucelindbloom.com/">link</a> Thomas provided in the source code which seems to be where a lot of the math involved in color interpolation comes from. For the layman like myself, I will just embrace the magic behind color interpolation.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">x &lt;-<span class="st"> </span>lisa<span class="op">$</span>AndyWarhol_<span class="dv">3</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw"><a href="../reference/lisa_palette.html">lisa_palette</a></span>(<span class="st">"AndyWarhol_3"</span>, <span class="dv">1000</span>, <span class="st">"continuous"</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(x, y), plot)</a></code></pre></div>
<p><img src="lisa-palette_files/figure-html/unnamed-chunk-7-1.png" width="700"><img src="lisa-palette_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Tyler Littlefield.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
